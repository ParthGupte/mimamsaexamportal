{% extends 'examPortalApp/body.html' %}

{% block script %}
  <script type="text/javascript">
    function startTimer(datetime, display) {
      var start = Date.now(),
        diff,
        minutes,
        seconds;
      function timer() {

        diff = ((datetime - Date.now()) / 1000);

        // does the same job as parseInt truncates the float
        days = (diff / (60 * 60 * 24)) | 0;
        diff = (diff % (60 * 60 * 24)) | 0;
        hours = (diff / (60 * 60)) | 0;
        diff = (diff % (60 * 60)) | 0;
        minutes = (diff / 60) | 0;
        seconds = (diff % 60) | 0;
        if (days > 0) {
          display.textContent = days + " days " + hours + " hours " + minutes + " minutes and " + seconds + " seconds";
        }
        else if (hours > 0) {
          display.textContent = hours + " hours " + minutes + " minutes and " + seconds + " seconds";
        }
        else if (minutes > 0) {
          display.textContent = minutes + " minutes and " + seconds + " seconds";
        }
        else {
          display.textContent = seconds + " seconds";
        }
        if ((datetime - Date.now()) <= 0) {
          clearInterval(intervalVar);
          location.reload();
        }
      };
      // we don't want to wait a full second before the timer starts

      timer();
      var intervalVar = setInterval(timer, 1000);
    }

    window.onload = function () {
      var d = new Date();
      d.setUTCDate({{ UTCDate }});
    d.setUTCMonth({{ UTCMonth }}-1);
    d.setUTCFullYear({{ UTCYear }});
    d.setUTCHours({{ UTCHours }});
    d.setUTCMinutes({{ UTCMinutes }});
    d.setUTCSeconds({{ UTCSeconds }});
    console.log(d);
    var display = document.querySelector('#time');
    startTimer(d.getTime(), display);
    };
  </script>
{% endblock %}

{% block content %}
  <div class="fluid-container">
    <h2>The quiz will begin in</h2>
    <h2 id="time">
    </h2>
  </div>
{% endblock %}
